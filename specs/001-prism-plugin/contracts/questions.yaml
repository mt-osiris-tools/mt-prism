# Questions Schema Contract
# Version: 1.0.0
# Purpose: Defines clarification questions structure

schema_version: "1.0.0"
description: "Clarification questions for stakeholders"

questions:
  type: array
  required: true
  items:
    type: object
    required_fields: [id, priority, stakeholder, question, context, suggestions, gap_id, status]
    
    fields:
      id:
        type: string
        pattern: "^QUEST-\\d{3}$"
        example: "QUEST-001"
      
      priority:
        type: enum
        values: [critical, high, medium, low]
      
      stakeholder:
        type: enum
        values: [product, design, engineering, all]
      
      question:
        type: string
        description: "Must end with question mark"
        min_length: 10
      
      context:
        type: string
        description: "Background information"
      
      suggestions:
        type: array
        items: {type: string}
        min_items: 1
        max_items: 5
        description: "Possible answers"
      
      gap_id:
        type: string
        pattern: "^GAP-\\d{3}$"
        description: "Related gap"
      
      requirement_id:
        type: string
        pattern: "^REQ-(FUNC|NF|CONST|ASSUMP)-\\d{3}$"
        optional: true
      
      component_id:
        type: string
        pattern: "^COMP-\\d{3}$"
        optional: true
      
      response:
        type: string
        optional: true
        description: "Stakeholder's answer"
      
      answered_by:
        type: string
        optional: true
      
      answered_at:
        type: string
        format: ISO8601
        optional: true
      
      confidence:
        type: float
        minimum: 0.0
        maximum: 1.0
        optional: true
        description: "Confidence in response"
      
      status:
        type: enum
        values: [pending, answered, applied, deferred]
        default: pending

example: |
  questions:
    - id: QUEST-001
      priority: critical
      stakeholder: design
      question: "How should users trigger the CSV export? The requirement specifies export functionality but the design is missing UI for it."
      context: |
        REQ-FUNC-015 states: "Users must be able to export table data to CSV format"
        However, the Figma designs for the data table screen do not include 
        any export button, menu item, or action.
      suggestions:
        - "Add an 'Export' button to the table toolbar"
        - "Add 'Export to CSV' option in the row action menu"
        - "Add 'Export' to the main navigation menu"
        - "Defer CSV export to a future release"
      gap_id: GAP-001
      requirement_id: REQ-FUNC-015
      status: pending
